/* -------------------------------
   Reset / Base Style
---------------------------------- */

/* ボックスサイズを border-box に統一 */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* 余白リセット */
html,
body,
h1,
h2,
h3,
h4,
h5,
h6,
p,
ul,
ol,
li,
figure,
figcaption,
blockquote,
dl,
dd {
  margin: 0;
  padding: 0;
}

/* リストの装飾を消す */
ul,
ol {
  list-style: none;
}

/* デフォルトのフォント設定 */
body {
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  font-family: "Noto Sans JP", system-ui, sans-serif;
  background: #fff;
  color: #222;
}

/* メディア要素の調整 */
img,
picture,
video,
canvas,
svg {
  display: block;
  max-width: 100%;
}

/* 入力・ボタンのフォント継承 */
input,
button,
textarea,
select {
  font: inherit;
  color: inherit;
}

/* ボタンのリセット */
button {
  border: none;
  background: none;
  cursor: pointer;
}

/* アンカー装飾を消す */
a {
  color: inherit;
  text-decoration: none;
}

/* レイヤー */
html,
body {
  height: 100%;
  letter-spacing: 0.03em;
  /* 日本語・英数字が混ざっても読みやすい */
  word-break: break-word;
  -webkit-text-size-adjust: 100%;
  margin: 0;
  overflow: hidden;
}

body {
  margin: 0;
}

#stage-wrap {
  width: 100vw;
  height: 100vh;
  position: fixed;
  /* アドレスバー変動に影響されたくない場合 */
  inset: 0;
  background: #f5f5f5;
}

#stage {
  width: 768px;
  /* 基準：タブレット縦 768×1024 */
  height: 1024px;
  transform-origin: top left;
  will-change: transform;
  position: absolute;
  /* 中央寄せのため */
}

#stage canvas {
  display: block;
  width: 100% !important;
  /* CSSサイズ＝基準に合わせる */
  height: 100% !important;
  max-width: none;
  /* ブラウザの勝手な縮小を抑止 */
  touch-action: none;
}

/* モーダル全体 */
.modal {
  position: fixed;
  inset: 0;
  /* top:0; left:0; right:0; bottom:0 と同じ */
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  /* UIより最前面 */
}

/* 有効化 */
.modal.active {
  display: flex;
}

/* モーダル中身 */
.modal-content {
  border-radius: 12px;
  padding: 40px 30px;
  text-align: center;
  width: 94%;
}

.modal-content h1 {
  font-size: 40px;
  margin-bottom: 20px;
  color: #fff;
}

#startButton {
  background: #ff9800;
  border: 4px solid #fff;
  padding: 15px 40px;
  font-size: 60px;
  font-weight: bold;
  color: #fff;
  border-radius: 20px;
  cursor: pointer;
}

/* YouTube用の中身 */
.modal-content.yt {
  border-radius: 12px;
  overflow: hidden;
  background: #000;
  box-shadow: 0 12px 40px rgba(0, 0, 0, .35);
}

.yt-frame {
  aspect-ratio: 16/9;
  width: 100%;
}

#yt-player {
  width: 100%;
  height: 100%;
}

.yt-error {
  padding: 12px 16px;
  background: #fff3cd;
  color: #664d03;
  font-weight: 600;
}



#app {
  position: fixed;
  inset: 0;
}

canvas {
  display: block;
  width: 100%;
  height: 100%;
}

#app {
  position: fixed;
  inset: 0;
  /* 画面全体を占有 */
  display: block;
  /* 空でもブロックとして扱う */
}

/* UIをcanvas上に */
#ui {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

#ui .page,
#ui button,
#ui input,
#ui a {
  pointer-events: auto;
}

/* ページ枠（中央寄せ、下部ナビ固定のため relative） */
.page {
  position: absolute;
  inset: 0;
  display: none;
}

.page.active {
  display: block;
}

.balloon {
  position: relative;
  margin: 30px auto;
  width: 94%;
  background: rgba(255, 255, 255, 0.96);
  border-radius: 16px;
  padding: clamp(15px, 2.4vw, 20px) clamp(15px, 3vw, 20px);
  /*box-shadow: 0 8px 28px rgba(0, 0, 0, 0.18);*/
  /*border: 1px solid rgba(0, 0, 0, 0.08);*/
}

/* 吹き出しの“しっぽ”（下側に出す） */
.balloon::after {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -36px;
  /* balloon の下から飛び出す */
  width: 0;
  height: 0;
  border: 18px solid transparent;
  border-top-color: rgba(255, 255, 255, 0.96);
  /* 吹き出し背景と同じ色 */
  /*filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.08));*/
}

/* テキスト部分 */
.balloon p {
  margin: 0;
  color: #222;
  line-height: 1.6;
  font-size: 30px;
  font-weight: 600;
  letter-spacing: 0.02em;
}

/* 下部ナビ（ページごとに持つ） */
.page-bottom {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: max(16px, env(safe-area-inset-bottom));
  width: 94%;
  display: flex;
  justify-content: space-between;
  gap: 12px;
}

/* 右寄せしたいページだけに使う */
.page-bottom.right {
  justify-content: flex-end;
}

/* ====== 台座（既存） ====== */
.card {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 9%;
  width: 94%;
  padding: 16px;
  border-radius: 12px;
  background: rgba(0, 0, 0, .45);
  color: #fff;
  backdrop-filter: blur(2px);
  overflow: hidden;
}

/* ====== リスト全体 ====== */
.form-like.form-like--sheet {
  display: grid;
  gap: 6px;
  margin: 0;
  padding: 0;
  list-style: none;
}



/* 1行＝ 左ラベル／中央入力／右「修正」 */
.row {
  display: grid;
  grid-template-columns: 110px 1fr 88px;
  /* 左帯／本体／修正 */
  align-items: center;
  gap: 10px;
  border-bottom: 1px solid #fff;
  padding-bottom: 6px;
}

.row:last-child {
  border-bottom: none;
}

/* 左側の黒帯ラベル（丸角） */
.badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 42px;
  padding: 8px 12px;
  font-size: 16px;
  font-weight: 700;
  color: #fff;
  max-width: 100%;
}

/* 右の「修正」ボタン（青・角丸） */
.fix-btn {
  border: 0;
  border-radius: 10px;
  background: #2f66ff;
  font-size: 30px;
  color: #fff;
  font-weight: 600;
  box-shadow: 0 3px 10px rgba(0, 0, 0, .22);
  cursor: pointer;
  padding: 5px 10px;
}

.fix-btn:active {
  transform: translateY(1px);
}

.fix-btn:focus-visible {
  outline: 3px solid #4c9ffe;
  outline-offset: 2px;
}

.row-body,
.row-two,
.row-date,
.row-tel {
  min-width: 0;
}

/* 中央エリア（行の中身） */
.row-body {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

/* 「姓/名」2分割 */
.row-two {
  display: grid;
  grid-template-columns: auto 1fr auto 1fr;
  align-items: center;
  column-gap: 10px;
  row-gap: 6px;
}

.row-two .mini {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 28px;
  color: #fff;
  font-weight: 700;
  font-size: 16px;
}

/* 入力ピル（白・太文字） */
.pill-input {
  width: 100%;
  padding: 0 14px;
  border-radius: 12px;
  border: 1px solid #e0e2ea;
  background: #fff;
  color: #111;
  font-weight: 600;
  font-size: 35px;
  box-shadow: 0 3px 10px rgba(0, 0, 0, .12) inset, 0 2px 8px rgba(0, 0, 0, .18);
}

.pill-input.center {
  text-align: center;
}

/* 表示用ピル（性別など） */
.pill-display {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 0 16px;
  background: #fff;
  color: #111;
  border-radius: 12px;
  font-weight: 600;
  font-size: 35px;
  border: 1px solid #e0e2ea;
  box-shadow: 0 2px 8px rgba(0, 0, 0, .18);
}

/* 生年月日：3分割 + “年/月/日”の小ラベル */
.row-date {
  display: grid;
  grid-template-columns: 140px auto 92px auto 92px auto;
  align-items: center;
  column-gap: 10px;
}

.unit {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 36px;
  padding: 0 10px;
  color: #fff;
  font-weight: 700;
}

/* 電話番号：3分割 + 罫線風ハイフン */
.row-tel {
  display: grid;
  grid-template-columns: 130px auto 130px auto 130px;
  align-items: center;
  column-gap: 10px;
}

.sep {
  color: #fff;
  font-weight: 800;
  font-size: 22px;
  line-height: 1;
  opacity: .95;
}

/* レスポンシブ（幅が狭い時） */
@media (max-width: 640px) {
  .row {
    grid-template-columns: 1fr;
    /* 1列に積む */
  }

  .row-ctrl {
    justify-self: end;
  }

  .badge {
    width: 100%;
    justify-content: flex-start;
  }
}


/* Page3 風の選択リスト */

/* 各行（idcard本体 + 右側サイド） */
.idcard-row {
  display: flex;
  align-items: stretch;
  gap: 5px;
  color: #222;
  margin-bottom: 10px;
}

/* idcard 自体は左側の選択カード */
.idcard {
  flex: 1;
  display: block;
  cursor: pointer;
}

.idcard>input {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.idcard__body {
  display: grid;
  grid-template-columns: 42px 1fr;
  gap: 14px;
  align-items: center;
  background: #fff;
  border: 4px solid #b9b9b9;
  border-radius: 16px;
  padding: 10px;
  opacity: .85;
}

/* 中央テキスト部 */
.idcard__main {
  display: grid;
  gap: 8px;
}

.idcard__title {
  text-align: center;
  font-weight: 900;
  font-size: 38px;
  letter-spacing: .02em;
  line-height: 1.2;
}

.idcard__meta {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 4px 12px;
  font-weight: 800;
}

.idcard__meta-value {
  opacity: .85;
}


/* 右側のサイド（課金情報） */
.idcard__side {
  display: flex;
  align-items: center;
}

.plan {
  display: grid;
  place-items: center;
  border: 4px solid #1c3b8d;
  border-radius: 14px;
  background: #fff;
  color: #1c3b8d;
  padding: 10px 8px;
}

.plan__title {
  font-weight: 700;
  font-size: 14px;
}

.plan__value {
  font-weight: 700;
  font-size: 34px;
  line-height: 1;
}

.plan__detail {
  margin-top: 8px;
  border-radius: 10px;
  border: 3px solid #1c3b8d;
  background: #fff;
  color: #1c3b8d;
  font-weight: 700;
  padding: 6px 12px;
  cursor: pointer;
  width: 100%;
}

/* ラジオ（未選択グレー → 選択時赤二重丸） */
.idcard__radio {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: #9d9d9d;
  justify-self: center;
}

.idcard input:checked+.idcard__body {
  border-color: #e40012;
  background: #fff;
  opacity: 1;
}

.idcard input:checked+.idcard__body .idcard__title {
  color: #e40012;
}

.idcard input:checked+.idcard__body .idcard__radio {
  position: relative;
  background: transparent;
  width: 26px;
  height: 26px;
  border: 4px solid #e40012;
  box-shadow: inset 0 0 0 4px #fff;
  border-radius: 50%;
}

.idcard input:checked+.idcard__body .idcard__radio::after {
  content: "";
  position: absolute;
  background: #e40012;
  width: 14px;
  height: 14px;
  top: 2px;
  left: 2px;
  border-radius: 50%;
}

/* 新規登録用 */
.idcard--new .idcard__body {
  justify-content: center;
}

.idcard__title--new {
  font-size: 28px;
  font-weight: 900;
  text-align: center;
}

/* Page4 風の縦ボタン */

.choices {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 9%;
  width: 94%;
  display: grid;
  gap: 12px;
}

.choices.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px 16px;
  margin: 12px 0 20px;
}

.choice-btn {
  appearance: none;
  width: 100%;
  padding: 14px 18px;
  border-radius: 9999px;
  border: 4px solid #1c3b8d;
  color: #1c3b8d;
  background: #fff;
  font-size: 30px;
  font-weight: 600;
  transition: border-color .15s, color .15s, box-shadow .15s;
}

.choice-btn:focus {
  outline: none;
}

.choice-btn.is-selected {
  border-color: #d40000;
  color: #d40000;
}

/* サブテキスト付きボタン */
.choice-btn--with-sub {
  padding: 12px 18px 10px;
}

.choice-btn--with-sub .sub {
  display: block;
  margin-top: 4px;
  font-size: 24px;
  line-height: 1.4;
  font-weight: 600;
}

/* 従業員選択済みの吹き出し */
.staff-bubble {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  top: -80px;
  /* キャラの胸あたりに重ねる。必要なら調整 */
  z-index: 5;
  padding: 6px 12px;
  border-radius: 20px;
  font-weight: 600;
  font-size:30px;
  color: #fff;
  background: #ff4545;
  /* ピンク系 */
  box-shadow: 0 6px 14px rgba(255, 107, 134, .25), 0 1px 0 rgba(0, 0, 0, .05) inset;
  border: 4px solid #fff;
}

.staff-bubble::before {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -18px;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 16px solid transparent;
  border-right: 16px solid transparent;
  border-top: 16px solid #ffffff;
}

.staff-bubble::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -12px;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 12px solid transparent;
  border-right: 12px solid transparent;
  border-top: 12px solid #ff4545;
}

.is-hidden {
  display: none !important;
}

/* 共通ボタンスタイル */
.btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  min-width: 120px;
  padding: 5px 24px;
  font-size: 30px;
  font-weight: 600;
  border-radius: 30px;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transition: background 0.2s ease;
}

/* ===== 戻るボタン ===== */
.btn.back {
  background: #fff;
  color: #222;
  border: 4px solid #222;
  padding-left: 52px;
  /* 左アイコン分余白 */
}

/* ===== 次へボタン ===== */
.btn.next {
  background: #fff;
  color: #d40000;
  border: 4px solid #d40000;
  padding-right: 52px;
  /* 右アイコン分余白 */
}

/* ===== アイコンの丸い背景 ===== */
.btn::before {
  content: "";
  position: absolute;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: currentColor;
  /* テキスト色と同じ */
  top: 50%;
  transform: translateY(-50%);
}

/* 戻るアイコンは左 */
.btn.back::before {
  left: 8px;
}

/* 次へアイコンは右 */
.btn.next::before {
  right: 8px;
}

/* ===== 丸の中の矢印（2本線の山形） ===== */
.btn::after {
  content: "";
  position: absolute;
  width: 12px;
  height: 12px;
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
  border: solid;
  border-width: 0 3px 3px 0;
}

/* 戻る（左向き） */
.btn.back::after {
  left: 20px;
  border-color: #fff;
  transform: translateY(-50%) rotate(135deg);
}

/* 次へ（右向き） */
.btn.next::after {
  right: 20px;
  border-color: #fff;
  background: transparent;
  transform: translateY(-50%) rotate(-45deg);
}